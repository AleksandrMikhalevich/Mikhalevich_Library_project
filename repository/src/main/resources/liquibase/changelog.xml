<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet id="1" author="Alex Mikhalevich">
        <comment>create table library_user</comment>
        <sql>
            create table library_user
            (
                id       int auto_increment
                    primary key,
                email    varchar(255) null,
                login    varchar(255) null,
                password varchar(255) null
            );
        </sql>
    </changeSet>

    <changeSet id="2" author="Alex Mikhalevich">
        <comment>create table publisher</comment>
        <sql>
            create table publisher
            (
                id      int auto_increment
                    primary key,
                city    varchar(255) null,
                country varchar(255) null,
                house   varchar(255) null,
                street  varchar(255) null,
                zipcode varchar(255) null,
                name    varchar(255) null
            );
        </sql>
    </changeSet>

    <changeSet id="3" author="Alex Mikhalevich">
        <comment>create table genre</comment>
        <sql>
            create table genre
            (
                id   int auto_increment
                    primary key,
                name varchar(255) null
            );
        </sql>
    </changeSet>

    <changeSet id="4" author="Alex Mikhalevich">
        <comment>create table book</comment>
        <sql>
            create table book
            (
                id                 int auto_increment
                    primary key,
                language           varchar(255) null,
                title              varchar(255) null,
                receipt_date       date         null,
                year_of_publishing varchar(255) null,
                publisher_id       int          null,
                constraint book_publisher_id_fk
                    foreign key (publisher_id) references publisher (id)
            )
        </sql>
    </changeSet>

    <changeSet id="5" author="Alex Mikhalevich">
        <comment>create table author</comment>
        <sql>
            create table author
            (
                id          int auto_increment
                    primary key,
                country     varchar(255) null,
                first_name  varchar(255) null,
                second_name varchar(255) null,
                surname     varchar(255) null
            );
        </sql>
    </changeSet>

    <changeSet id="6" author="Alex Mikhalevich">
        <comment>create table book_author</comment>
        <sql>
            create table book_author
            (
                book_id   int not null,
                author_id int not null,
                primary key (book_id, author_id),
                constraint book_author_author_id_fk
                    foreign key (author_id) references author (id),
                constraint book_author_book_id_fk
                    foreign key (book_id) references book (id)
            );
        </sql>
    </changeSet>

    <changeSet id="7" author="Alex Mikhalevich">
        <comment>create table author_publisher</comment>
        <sql>
            create table author_publisher
            (
                author_id    int not null,
                publisher_id int not null,
                primary key (author_id, publisher_id),
                constraint author_publisher_author_id_fk
                    foreign key (author_id) references author (id),
                constraint author_publisher_publisher_id_fk
                    foreign key (publisher_id) references publisher (id)
            );
        </sql>
    </changeSet>

    <changeSet id="8" author="Alex Mikhalevich">
        <comment>create table book_genre</comment>
        <sql>
            create table book_genre
            (
                book_id  int not null,
                genre_id int not null,
                primary key (book_id, genre_id),
                constraint book_genre_book_id_fk
                    foreign key (book_id) references book (id),
                constraint book_genre_genre_id_fk
                    foreign key (genre_id) references genre (id)
            );
        </sql>
    </changeSet>



</databaseChangeLog>